---
title: "P8105_hw2_dxy2101"
author: "Daisy Yan"
date: "2022-10-04"
output: github_document
---

```{r setup, message=FALSE}
library(tidyverse)
```

# Problem 1

### Load and clean NYC transit dataset

```{r clean, message=FALSE}
subway_data = 
  read_csv(file = '~/Desktop/Data Science I/Homeworks/dxy2101_hw2_P8105/subway.csv') %>%
  janitor::clean_names() %>%
  select(line:entry, vending, ada) %>%
  mutate(
    entry = recode(entry, "YES" = TRUE, "NO" = FALSE)
    )
```

```{r name}
# List variables in dataset
names(subway_data)
```

The NYC transit dataset includes the following variables: line, station name, station latitude, station longitude, route numbers 1-11, entrance type, entry, vending, and ADA compliance.

Thus far, data cleaning has comprised of making all of the variable names the same format, retaining relevant variables, and converting the `entry` variable into a logical variable for future analysis. There are `r nrow(subway_data)` rows and `r ncol(subway_data)` columns.

This data is not tidy.

```{r proportion, echo=FALSE}
# Number of stations without vending that do not allow entrance
x = nrow(
  subway_data %>% 
  filter(vending=='NO', entry==FALSE) %>% 
  distinct(station_name, line)
  )

# Number of stations without vending that do allow entrance
y = nrow(
  subway_data %>% 
  filter(vending=='NO', entry==TRUE) %>% 
  distinct(station_name, line)
  )
```

There are `r nrow(distinct(subway_data, station_name, line))` distinct stations. There are `r nrow(subway_data %>% filter(ada==TRUE) %>% distinct(station_name, line))` stations that are ADA compliant. `r round(y/x, 2)` of the station entrances/exits without vending allow entrance.

```{r reformat}
# Convert all route variables to characters
subway_data =
  subway_data %>%
  mutate(
    route8 = as.character(route8),
    route9 = as.character(route9),
    route10 = as.character(route10),
    route11 = as.character(route11)
  )
  
# Make route number and route name distinct variables
subway_data =
  pivot_longer(
    subway_data,
    route1:route11,
    names_to = "number",
    names_prefix = "route",
    values_to = "name"
  )
```

Of the stations that serve the A train, `r nrow(subway_data %>% filter(name=='A', ada==TRUE) %>% distinct(station_name, line))` are ADA compliant.